# team-8

Стек технологий:
• MongoDB;
• Express;
• React;
• NodeJS;
• WebSocket.

Модели:
User – модель, описывающая пользователя (необходима для аутентификации);
Message – модель, позволяющая сохранять сообщения в базе.
ChatRoom – представляет «комнату» для работы сокета, содержит информацию о пользователях, которые входят в общий чат. В данном случае у нас чат в виде диалога двух пользователей.
VerificationToken – модель токена, позволяющего верифицировать пользователя.
Модели реализованы с помощью модуля mongoose, работающего с базой данных MongoDB.

API:
Отношение Клиент-Сервер сделаны с помощью обращений клиента к серверу посредством API. Пройдемся по этапам входа пользователя в профиль.
Пользователь обращается к главной странице, после чего ему предлагается войти в свой профиль или зарегистрироваться. При регистрации, данные отправляются на сервер с помощью POST запроса на /api/user. Данные сохраняются в базу после проверки на дубликаты (к сожалению, алгоритмы gmail иногда блокируют рассылку с "сомнительных" приложений. В таком случае регистрация пользователя происходит, но без отправки сообщения и дальнейшего подтверждения аккаунта зайти не удастся. Об этом будет сообщено после попытки входа).
Пароль шифруется с помощью модуля bcrypt с "солью". После чего сохраняется в базу. Создается верификационный токен, который привязывается к пользователю по id и является случайным набором символов. Если аккаунт не подтвержден в течение 12 часов, токен сгорает. Однако есть возможность повторной отправки, после которой предыдущий токен становится недействительным.
Ссылка, по которой необходимо перейти для подтверждения, отправляется на почту пользователю с помощью модуля NodeMailer. NodeMailer отправляет по службе ретрансляции SMTP, подключённой к почтовому серверу smtp.google.com.
Пользователь переходит по верификационной ссылке, после чего он может авторизоваться в системе. Если не верифицированный пользователь совершает попытку входа, ему предлагают отправить код заново.
После авторизации для пользователя генерируется индивидуальный токен с помощью модуля jsonwebtoken, который сохраняет его в локальное хранилище браузера. Доступ проверяется с помощью контроллера requireSignin, который проверяет заголовки запросов, для которых требуется авторизация (индивидуальный токен).
Чат реализован с помощью модуля socket.io (протокол WebSocket), позволяющего обмениваться сообщениями между браузером и веб-сервером в режиме реального времени.
Для того чтобы пользователь мог общаться только с конкретным пользователем создаются так называемые «комнаты». Клиент прослушивает порт сервера по протоколу WebSocket, таким образом происходит обмен сообщениями.
Для того, чтобы начать диалог с пользователем, необходимо выполнить поиск по логину.

Реализованный функционал:
• Приватный чат;
• Верификация аккаунта по почте;
• Обмен сообщениями без перезагрузки страницы;
• Основная фича: пользователь печатает сообщение;

Искренне сожалеем о том, что не успели отправить работу в срок. Простите нас :.(
Так как основной репозитарий был закрыт, мы продолжили работу в форкнутом. Также изменили ссылку на приложение. Актуальная версия приложения находится в ветке demo.
